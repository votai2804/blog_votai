<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Testing & API Testing - Blog</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .blog-post-header { background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%); color: #fff; padding: 80px 0; text-align: center; margin-top: 60px; }
        .blog-post-header h1 { font-size: 2.5rem; margin-bottom: 20px; }
        .blog-post-meta { display: flex; justify-content: center; gap: 20px; font-size: 0.95rem; margin-bottom: 20px; }
        .blog-post-content { max-width: 800px; margin: 60px auto; line-height: 1.8; color: #333; }
        .blog-post-content h2 { font-size: 1.8rem; margin: 40px 0 20px 0; color: #000; }
        .blog-post-content h3 { font-size: 1.3rem; margin: 30px 0 15px 0; color: #1e40af; }
        .blog-post-content p { margin-bottom: 15px; text-align: justify; }
        .blog-post-content ul { margin-bottom: 20px; margin-left: 20px; }
        .blog-post-content li { margin-bottom: 10px; }
        .code-block { background: #f5f5f5; border-left: 4px solid #2563eb; padding: 15px; margin: 20px 0; overflow-x: auto; border-radius: 5px; }
        .code-block code { font-family: 'Courier New', monospace; font-size: 0.9rem; color: #333; }
        .author-box { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 40px 0; display: flex; gap: 15px; }
        .author-avatar { width: 70px; height: 70px; border-radius: 50%; background: #2563eb; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; flex-shrink: 0; }
        .author-info h4 { margin: 0 0 5px 0; }
        .author-info p { margin: 0; color: #666; font-size: 0.9rem; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #2563eb; text-decoration: none; font-weight: 600; }
        .back-link:hover { color: #1e40af; }
    </style>
</head>
<body>
    <header class="header" id="header">
        <nav class="navbar">
            <a href="../index.html" class="logo">blogvt</a>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../index.html" class="nav-link">Trang chủ</a></li>
                <li><a href="../about.html" class="nav-link">Về tôi</a></li>
                <li><a href="../skills.html" class="nav-link">Kỹ năng</a></li>
                <li><a href="../projects.html" class="nav-link">Dự án</a></li>
                <li><a href="../certifications.html" class="nav-link">Chứng chỉ</a></li>
                <li><a href="../blog.html" class="nav-link active">Blog</a></li>
                <li><a href="../contact.html" class="nav-link">Liên hệ</a></li>
            </ul>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <section class="blog-post-header">
        <div class="container">
            <h1>Unit Testing & API Testing: Đảm Bảo Chất Lượng Code</h1>
            <div class="blog-post-meta">
                <span><i class="fas fa-calendar"></i> 30 Nov 2024</span>
                <span><i class="fas fa-tag"></i> Testing</span>
                <span><i class="fas fa-clock"></i> 18 phút đọc</span>
            </div>
        </div>
    </section>

    <div class="container">
        <article class="blog-post-content">
            <a href="../blog.html" class="back-link">← Quay lại Blog</a>

            <h2>Tại Sao Testing Quan Trọng?</h2>
            <p>Testing là critical part của software development. Nó giúp phát hiện bugs sớm, maintain quality code, và tăng confidence khi deploy.</p>

            <h2>Loại Tests</h2>
            <ul>
                <li><strong>Unit Tests:</strong> Test individual functions/methods</li>
                <li><strong>Integration Tests:</strong> Test interactions giữa components</li>
                <li><strong>API Tests:</strong> Test endpoints của APIs</li>
                <li><strong>End-to-End Tests:</strong> Test toàn bộ application flow</li>
            </ul>

            <h2>Unit Testing Với xUnit</h2>
            <p>xUnit là popular testing framework cho .NET:</p>
            <div class="code-block">
<code">using Xunit;

public class CalculatorTests
{
    [Fact]
    public void Add_Returns_Sum()
    {
        // Arrange
        var calculator = new Calculator();
        
        // Act
        var result = calculator.Add(2, 3);
        
        // Assert
        Assert.Equal(5, result);
    }

    [Theory]
    [InlineData(2, 3, 5)]
    [InlineData(0, 0, 0)]
    [InlineData(-1, 1, 0)]
    public void Add_WithVariousInputs_ReturnsCorrectSum(int a, int b, int expected)
    {
        var calculator = new Calculator();
        var result = calculator.Add(a, b);
        Assert.Equal(expected, result);
    }
}</code>
            </div>

            <h2>Mocking Với Moq</h2>
            <p>Moq giúp create mock objects cho dependencies:</p>
            <div class="code-block">
<code">using Moq;

[Fact]
public void UserService_CreateUser_CallsRepository()
{
    // Arrange
    var mockRepository = new Mock&lt;IUserRepository&gt;();
    var userService = new UserService(mockRepository.Object);

    // Act
    userService.CreateUser("John", "john@example.com");

    // Assert
    mockRepository.Verify(
        x => x.AddUser(It.IsAny&lt;User&gt;()),
        Times.Once()
    );
}</code>
            </div>

            <h2>API Testing Với Postman</h2>
            <p>Postman là tool phổ biến để test APIs:</p>
            <ul>
                <li>Tạo requests (GET, POST, PUT, DELETE)</li>
                <li>Set headers, body, authentication</li>
                <li>Inspect responses và status codes</li>
                <li>Create test assertions</li>
                <li>Organize requests trong collections</li>
            </ul>

            <h2>API Test Script</h2>
            <div class="code-block">
<code">// Postman test script
pm.test("Status code is 200", function() {
    pm.response.to.have.status(200);
});

pm.test("Response contains id", function() {
    var jsonData = pm.response.json();
    pm.expect(jsonData.id).to.be.a('number');
});

pm.test("Response time is less than 1000ms", function() {
    pm.expect(pm.response.responseTime).to.be.below(1000);
});</code>
            </div>

            <h2>Integration Tests</h2>
            <div class="code-block">
<code">public class ProductRepositoryTests : IAsyncLifetime
{
    private readonly ApplicationDbContext _context;
    private readonly ProductRepository _repository;

    public async Task InitializeAsync()
    {
        // Setup test database
        _context = new ApplicationDbContext(
            new DbContextOptionsBuilder&lt;ApplicationDbContext&gt;()
                .UseInMemoryDatabase("TestDb")
                .Options
        );
        _repository = new ProductRepository(_context);
    }

    [Fact]
    public async Task GetProduct_ReturnsCorrectProduct()
    {
        // Arrange
        var product = new Product { Name = "Laptop", Price = 1000 };
        _context.Products.Add(product);
        await _context.SaveChangesAsync();

        // Act
        var result = await _repository.GetProductByIdAsync(product.Id);

        // Assert
        Assert.NotNull(result);
        Assert.Equal("Laptop", result.Name);
    }

    public async Task DisposeAsync()
    {
        // Cleanup
        await _context.Database.EnsureDeletedAsync();
        _context.Dispose();
    }
}</code>
            </div>

            <h2>Test-Driven Development (TDD)</h2>
            <p>TDD Workflow:</p>
            <ol>
                <li>Write failing test (Red)</li>
                <li>Write minimum code để pass test (Green)</li>
                <li>Refactor code (Refactor)</li>
                <li>Repeat</li>
            </ol>

            <h2>Code Coverage</h2>
            <p>Đo percentage của code được test:</p>
            <div class="code-block">
<code">// Cài đặt coverage tool
dotnet add package coverlet.collector

// Run tests với coverage
dotnet test /p:CollectCoverage=true</code>
            </div>

            <h2>Best Practices</h2>
            <ul>
                <li>Viết tests ngay khi viết code</li>
                <li>Target 80%+ code coverage</li>
                <li>Một test cho một behavior</li>
                <li>Use descriptive test names</li>
                <li>Keep tests focused và fast</li>
                <li>Mock external dependencies</li>
                <li>Test edge cases và error scenarios</li>
                <li>Maintain tests cùng với code</li>
            </ul>

            <h2>Kết Luận</h2>
            <p>Testing là essential practice cho building reliable software. Bằng cách implement comprehensive tests, bạn có thể deliver quality code confidently và reduce bugs trong production.</p>

            <div class="author-box">
                <div class="author-avatar">VT</div>
                <div class="author-info">
                    <h4>Võ Tấn Tài</h4>
                    <p>Software Engineer specializing in Testing and Code Quality</p>
                    <p><a href="https://github.com/votai2804" target="_blank" style="color: #2563eb; text-decoration: none;">github.com/votai2804</a></p>
                </div>
            </div>

            <a href="../blog.html" class="back-link">← Quay lại Blog</a>
        </article>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Về Blog</h4>
                    <p>Chia sẻ kiến thức về Software Engineering.</p>
                </div>
                <div class="footer-section">
                    <h4>Liên Kết Nhanh</h4>
                    <ul>
                        <li><a href="../index.html">Trang Chủ</a></li>
                        <li><a href="../about.html">Về Tôi</a></li>
                        <li><a href="../projects.html">Dự Án</a></li>
                        <li><a href="../blog.html">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Mạng Xã Hội</h4>
                    <div class="footer-social">
                        <a href="https://github.com/votai2804" target="_blank"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Võ Tấn Tài. Tất cả quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
</body>
</html>
